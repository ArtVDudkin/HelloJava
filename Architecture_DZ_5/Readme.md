# `Домашнее задание 5`

## `Задача:`

Необходимо разделить на горизонтальные уровни «Автомобильный навигатор с картами”. 
Много пользователей. 
Программа работает на мобильных устройствах с выходом в сеть.

Что видит пользователь, как взаимодействует?
Какие задачи можно делать – функции системы? Декомпозировать на общие функции и доменные функции.
Какие и где хранятся данные? У пользователя и в сети.

Предложить варианты связывания всех уровней – сценарии использования. 3-4 сценария.
Сформировать компоненты для любой системы из задания. Выпустить диаграмму компонент UML.

## `Описание решения:`

1. Пользовательский интерфейс:
При запуске приложения пользователь видит главное окно приложения, которое включает в себя:
 * Область просмотра: карта города вблизи места нахождения пользователя и отметка пользователя на ней 
 * Элементы управления приложением: кнопка вызова меню настроек приложения, строка поиска адреса или организации, кнопки управления приложением (увеличить/уменьшить масштаб, вкл/выкл ориентации карты на строго север, кнопки для перехода на другие окна приложения, голосовое управление) 
 * Обратная связь с пользователем, описывающая поведение компонентов интерфейса при взаимодействии с пользователем (например, можно одним пальцем передвинуть карту вверх/вниз/влево/вправо, двумя пальцами повернуть карту или увеличить/уменьшить масштаб и т.д., во время движения навигатор предупреждает голосом и на карте через какое расстояние и куда повернуть)
 * API для интеграции с уровнем бизнес-логики

2. Бизнес-логика (функции автомобильного навигатора)
 
* Характерная для приложения (клиентская часть): 
  * Ввести адрес или название организации в строке поиска и найти объект на карте
  * Выбрать объект на карте вручную (без использования строки поиска)
  * Просмотр информации об объекте (часы работы, телефон, сайт, отзывы)
  * Выбрать маршрут движения от текущего места положения пользователя до точки назначения из вариантов, предложенных системой с учетом ситуации на дорогах
  * Начать поездку по выбранному маршруту
  * Закончить поездку по выбранному маршруту при достижении точки назначения или по команде пользователя
  * Информационное сопровождение пользователя при движении по маршруту (отображение на карте текущего места положения пользователя, через какое расстояние и куда нужно повернуть, информация о светофорах, камерах, дорожных знаках и т.д.)
  * Перестроить маршрут, если пользователь повернул не туда или проехал нужный поворот
  * Ведение истории поездок пользователя и предложение ему быстрых вариантов в строке поиска
  * Расчет времени движения до точки назначения и уточнение этого времени в течение поездки в зависимости от скорости движения
  * Получение данных с GPS-датчика телефона информации о скорости движения автомобиля пользователя и отображение на экране
* Характерная для приложения (серверная часть):
  * сбор информации о ситуации на дорогах (пробки, ДТП, дорожные работы и т.д.)
  * сбор информации об установленных дорожных знаках, камерах, изменении схем дорожного движения
  * сбор информации об объектах города (название, адрес, время работы и другая информация)
  * сбор информации о возможных путях проезда между объектами на карте города (текущие и новые дороги)

* Не характерная для приложения 
  * баннер-афиша о новых фишках и возможностях приложения
  * реклама партнеров на карте города
  * возможность сделать скриншот текущего окна навигатора с информацией на нем

3. Хранение данных
* В сети хранятся данные:
  * о возможных путях проезда между крупными городами (текущие и новые дороги)
  * об объектах крупных городов (название, адрес, время работы и другая информация)
  * о текущей ситуации на дорогах (пробки, ДТП, дорожные работы и т.д.)
  * об установленных дорожных знаках, камерах, изменении схем дорожного движения
  * о возможных путях проезда между объектами на карте города (текущие и новые дороги)
* У пользователя хранятся данные:
  * История поездок и наиболее частые маршруты
  * О последнем месте положения пользователя, чтобы при запуске приложения отобразить его на карте
  * Опционально пользователь может скачать базу данных его города, чтобы приложение могло работать оффлайн при отсутствии мобильной сети или при неустойчивой связи (получая данные от GPS-датчика телефона)

Сценарии:
1. Пользователь с помощью пользовательского интерфейса вводит в строке поиска название организации. Приложение находит эту организацию на карте и отображает нужную область. Пользователь выбирает это место в качестве точки назначения. Система расчитывает возможные маршруты движения с учетом ситуации на дорогах и отображает их на карте. Пользователь выбирает подходящий ему маршрут и начинает поездку по этому маршруту. Во время движения пользователь получает (по сети) необходимую информацию куда нужно ехать, какие знаки установлены впереди него, есть ли камеры на дорогах и т.д. Пользователь успешно проехал по маршруту до точки назначения. Приложение завершило режим поездки, поздравило пользователя и перешло в обычный режим (главное окно).
2. Пользователь с помощью пользовательского интерфейса открывает запускает приложение, находит вручную известную ему организацию на карте, просматривает информацию о времени работы организации, и выбирает это место в качестве конечной точки назначения. Система расчитывает возможные маршруты движения с учетом ситуации на дорогах и отображает их на карте. При этом система видит, что движение на дорогах затруднено и пользователь не успеет прибыть на место назначения до завершения времени работы организации, и предупреждает об это пользователя. Пользователь отказывается от поездки по данному адресу и выбирает другой адрес, либо завершает работу с приложением.
3. Пользователь с помощью пользовательского интерфейса вводит в строке поиска название организации. Приложение находит эту организацию на карте и отображает нужную область. Пользователь выбирает это место в качестве точки назначения. Система расчитывает возможные маршруты движения с учетом ситуации на дорогах и отображает их на карте. Пользователь выбирает подходящий ему маршрут и начинает поездку по этому маршруту. Во время движения у пользователя пропадает мобильная связь и он не получает по сети актуальную информацию о маршруте движения (см. п.1). Приложение продолжает работу и сопровождение пользователя по маршруту с использованием информации о городе, хранящейся на устройстве пользователя, а также на основе данных, получаемых от GPS-датчика. Через какое-то время мобильная связь восстановилась, все системы продолжили работу в штатном режиме. Пользователь успешно проехал по маршруту до точки назначения. Приложение завершило режим поездки, поздравило пользователя и перешло в обычный режим (главное окно).
4. Пользователь с помощью пользовательского интерфейса открывает меню программы, находит интересующие его крупные города и скачивает подробную базу данных о дорогах и объектах этих городов для возможности работы приложения в оффлайн режиме при отсутствии сети.
