# `Проект Messager`

## `Цели и задачи проекта:`
Доработать "мессенджер" разработанный на семинаре, добавив:
- абстрактных пользователей
- абстрактное хранилище
- абстрактные модели сообщения
Продумать иерархию пользователей, наделив их разными правами например админ, может удалять из чата других пользователей.

## `Описание проекта:`
Для решения данной задачи код был разделен на две части: клиент и сервер. Клиент отвечает за создание абстрактного пользователя, обычного пользователя и администратора, а также за запуск программы (содержит точку входа). Сервер отвечает за обработку сообщений и их хранения (DAO).

# `Описание работы компонент`
## Блок Client:
## Компонента App.java содержит в себе:
1. Точку входа *main(String[] args)*.
2. Пример протекания процессов в ходе работы мессенджера: создаются три пользователя, которые добавляются в чат и начинают отправлять сообщения. Создается админ, который добавляется в чат и тоже что-то пишет. Один из пользователей пишет оскорбительное сообщение в адрес админа, за что админ выкидывает пользователя из чата.

## Компонента Client.java:
1. Представляет собой абстрактный класс, включающий в себя абстратные методы, описывающие возможное поведение пользователя:
2. `String getName()` возвращает имя пользователя.
3. `IChat getChatroom()` возвращает ссылку на чат, в котором находятся пользователи.
4. `void join(IChat chatroom)` служит для добавления пользователя в чат.
5. `void remove(IChat chatroom)` служит для удаления пользователя из чата.
6. `void printMessage(MessageModel msg)` служит для отображения сообщения пользователя (например в консоли).
7. `void sendMsg(MessageModel text)` служит для добавления сообщения пользователя в чат.

## Компонента User.java наследуется от абстрактного класса Client и содержит в себе:
1. Приватные поля *name* и *chatroom* для хранения имени пользователя и ссылки на чат.
2. Конструкторы `User(String name, IChat chatroom)` и `User(String name)` для создания экзепляра класса пользователя и в первом случае добавления нового пользователя в чат в момент вызова конструктора.
3. Переопределены методы `join(IChat chatroom)`, `remove(IChat chatroom)`, `printMessage(MessageModel msg)`, `sendMsg(MessageModel text)`, `getName()`, `getChatroom()`, описывающие конкретное поведение пользователя.

## Компонента Admin.java наследуется от класса User и содержит в себе:
1. Конструкторы `Admin(String name, IChat chatroom)` и `Admin(String name)` для создания экзепляра класса пользователя и в первом случае добавления нового пользователя в чат в момент вызова конструктора.
3. Метод `void kickUser(Client client, IChat chatroom)` для принудительного удаления пользователя из чата.

## Блок Server:

## Компонента MessageModel.java содержит в себе:
1. Представляет собой абстрактный класс, включающий в себя поля *text* и *id*, которые служат для хранения содержимого сообщения и его идентификатора.

## Компонента TextMessage.java наследуется от абстрактного класса MessageModel.java содержит в себе:
1. Конструкторы `TextMessage()` и `TextMessage(String text)` для создания экзепляра класса TextMessage (тектового сообщения).

## Компонента AudioMessage.java наследуется от абстрактного класса MessageModel.java содержит в себе:
1. Конструктор `AudioMessage(String title)` для создания экзепляра класса AudioMessage (голосового сообщения, в данном примере мессенджеру передается лишь заголовок сообщения в текстовом виде).

## Компонента IChat.java (интерфейс) содержит в себе:
1. Сигнатура метода `void sendMessage(MessageModel mm, Client me)` для отправки сообщения в чат всем пользователям, кроме того, кто отправил сообщение.
2. Сигнатура метода `void appendClient(Client client)` для добавления пользователя в чат.
3. Сигнатура метода `void removeClient(Client client)` для удаления пользователя из чата.

## Компонента MyChat.java имлементирует интерфейс IChat и содержит в себе:
1. Приватное поле *repo* для сохранения данных в репозиторий.
2. Конструктор `MyChat(DB currentRepo)` для создания экземпляра класса чат и указания, в каком репозитории хранить данные.
3. Переопределены методы `sendMessage(MessageModel mm, Client me)`, `appendClient(Client client)`, `removeClient(Client client)`, описывающие процедуры отправки сообщения, добавления и удаления пользователей чата. 

## Компонента IRepository.java (интерфейс) содержит в себе:
1. Сигнатура метода `void add(Client user)` для добавления пользователя в репозиторий и хранения его сообщений.
2. Сигнатура метода `void remove(Client user)` для удаления пользователя из репозитория.
3. Сигнатура метода `Client getByName(String name)` возвращает ссылку на пользователя по его имени.
4. Сигнатура метода `Client getById(int id)` возвращает ссылку на пользователя по id сообщения.
5. Сигнатура метода `int getCount()` возвращает количество пользователей, добавленных в репозиторий.

## Компонента DB.java имлементирует интерфейс IRepository и содержит в себе:
1. Приватное поле *users* для сохранения списка пользователей, добавленных в репозиторий.
2. Конструктор `DB()` для создания экземпляра класса репозиторий.
3. Переопределены методы `add(Client user)`, `remove(Client user)`, `Client getByName(String name)`, `Client getById(int id)` и `int getCount()`, описывающие процедуры добавления и удаления пользователей из репозитория, получения количества пользователей в репозитории, а также процедуры работы со списком пользователей и хранения из сообщений в процессе работы чата. 
